================================================================================
        GIáº¢I THÃCH CHI TIáº¾T Vá»€ SDK VÃ€ NHá»®NG THAY Äá»”I TRONG Dá»° ÃN
================================================================================

ğŸ“š Má»¤C Lá»¤C:
1. SDK lÃ  gÃ¬?
2. Táº¡i sao cáº§n nÃ¢ng cáº¥p lÃªn SDK?
3. So sÃ¡nh Code CÅ¨ vs Code Má»šI
4. Cáº¥u trÃºc SDK trong dá»± Ã¡n
5. Chi tiáº¿t thay Ä‘á»•i tá»«ng file
6. HÆ°á»›ng dáº«n sá»­ dá»¥ng SDK má»›i
7. Lá»£i Ã­ch cá»§a SDK
8. VÃ­ dá»¥ thá»±c táº¿

================================================================================
1. SDK LÃ€ GÃŒ?
================================================================================

SDK = Software Development Kit (Bá»™ cÃ´ng cá»¥ phÃ¡t triá»ƒn pháº§n má»m)

â¤ Äá»‹nh nghÄ©a Ä‘Æ¡n giáº£n:
   SDK lÃ  má»™t bá»™ code cÃ³ cáº¥u trÃºc, Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i tá»‘t, giÃºp láº­p trÃ¬nh viÃªn 
   dá»… dÃ ng sá»­ dá»¥ng cÃ¡c tÃ­nh nÄƒng phá»©c táº¡p mÃ  khÃ´ng cáº§n viáº¿t láº¡i tá»« Ä‘áº§u.

â¤ VÃ­ dá»¥ trong Ä‘á»i sá»‘ng:
   â€¢ KhÃ´ng cÃ³ SDK = Tá»± lÃ m bÃ¡nh tá»« Ä‘áº§u (mua nguyÃªn liá»‡u, trá»™n bá»™t, nÆ°á»›ng...)
   â€¢ CÃ³ SDK = DÃ¹ng lÃ² nÆ°á»›ng tá»± Ä‘á»™ng (bá» nguyÃªn liá»‡u vÃ o, báº¥m nÃºt, xong!)

â¤ VÃ­ dá»¥ SDK ná»•i tiáº¿ng:
   â€¢ OpenAI SDK - Äá»ƒ gá»i API ChatGPT
   â€¢ Stripe SDK - Äá»ƒ xá»­ lÃ½ thanh toÃ¡n
   â€¢ Google Maps SDK - Äá»ƒ hiá»ƒn thá»‹ báº£n Ä‘á»“
   â€¢ Facebook SDK - Äá»ƒ login vá»›i Facebook

================================================================================
2. Táº I SAO Cáº¦N NÃ‚NG Cáº¤P LÃŠN SDK?
================================================================================

âŒ Váº¤N Äá»€ Cá»¦A CODE CÅ¨:

1. Code ráº£i rÃ¡c, khÃ³ quáº£n lÃ½
   - KhÃ´ng cÃ³ cáº¥u trÃºc rÃµ rÃ ng
   - Logic phá»©c táº¡p náº±m lá»™n xá»™n
   - KhÃ³ tÃ¬m vÃ  sá»­a lá»—i

2. Thiáº¿u xá»­ lÃ½ lá»—i
   - KhÃ´ng cÃ³ retry khi network lá»—i
   - KhÃ´ng cÃ³ fallback khi API háº¿t quota
   - KhÃ´ng cÃ³ logging Ä‘á»ƒ debug

3. KhÃ³ tÃ¹y chá»‰nh
   - Muá»‘n Ä‘á»•i model pháº£i sá»­a nhiá»u chá»—
   - KhÃ´ng cÃ³ configuration management
   - Hard-coded values

4. Thiáº¿u documentation
   - KhÃ´ng cÃ³ docstring
   - KhÃ´ng cÃ³ type hints
   - KhÃ³ hiá»ƒu code lÃ m gÃ¬

5. KhÃ´ng cÃ³ data validation
   - Dá»¯ liá»‡u khÃ´ng cÃ³ cáº¥u trÃºc
   - DÃ¹ng dict thuáº§n â†’ dá»… lá»—i typo
   - KhÃ³ debug khi cÃ³ lá»—i

âœ… Lá»¢I ÃCH KHI NÃ‚NG Cáº¤P LÃŠN SDK:

1. Code sáº¡ch, dá»… Ä‘á»c
   âœ“ Cáº¥u trÃºc class-based rÃµ rÃ ng
   âœ“ Separation of concerns
   âœ“ Single Responsibility Principle

2. Xá»­ lÃ½ lá»—i toÃ n diá»‡n
   âœ“ Auto retry vá»›i configurable max_retries
   âœ“ Fallback sang Google Translate
   âœ“ Logging chi tiáº¿t vá»›i level (INFO, ERROR)

3. Dá»… tÃ¹y chá»‰nh
   âœ“ Configuration object (AIConfig)
   âœ“ CÃ³ thá»ƒ thay Ä‘á»•i model, temperature, timeout
   âœ“ Flexible vÃ  extensible

4. Documentation Ä‘áº§y Ä‘á»§
   âœ“ Docstring cho má»i class vÃ  method
   âœ“ Type hints Ä‘áº§y Ä‘á»§
   âœ“ Examples trong docstring

5. Data structure rÃµ rÃ ng
   âœ“ Dataclasses cho dá»¯ liá»‡u
   âœ“ Enum cho constants
   âœ“ Type-safe

================================================================================
3. SO SÃNH CODE CÅ¨ VS CODE Má»šI
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A. TRANSLATOR/AI_ENGINE.PY - Chá»©c nÄƒng Dá»‹ch thuáº­t                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CODE CÅ¨ (Functional Programming - Ráº£i rÃ¡c):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# 1. Biáº¿n global (khÃ´ng tá»‘t)
client = None

# 2. Function khá»Ÿi táº¡o client (má»—i láº§n gá»i pháº£i check)
def get_openai_client():
    global client
    if client is None:
        api_key = os.environ.get("OPENAI_API_KEY")
        if api_key:
            try:
                client = OpenAI(api_key=api_key)
            except Exception as e:
                print(f"Lá»—i: {e}")  # Chá»‰ print, khÃ´ng log
                client = None
    return client

# 3. Function lÆ°u tá»« vá»±ng (riÃªng láº»)
def luu_tu_vung(tu_moi, pinyin, nghia):
    try:
        dong_noi_dung = f"{tu_moi} ({pinyin}) : {nghia}\n"
        with open("tu_vung_trung_viet.txt", "a", encoding="utf-8") as f:
            f.write(dong_noi_dung)
        return f"ÄÃ£ lÆ°u: {tu_moi} ({pinyin})"
    except Exception as e:
        return f"Lá»—i: {e}"

# 4. Schema riÃªng láº» (hard to maintain)
tools_schema = [
    {
        "type": "function",
        "function": {
            "name": "luu_tu_vung",  # TÃªn function hard-coded
            "description": "LÆ°u tá»« vá»±ng...",
            ...
        }
    }
]

# 5. Function chÃ­nh - quÃ¡ dÃ i, phá»©c táº¡p
def chay_gia_su(cau_hoi):
    # Pháº£i tá»± check client
    client = get_openai_client()
    if not client:
        return "Lá»—i: KhÃ´ng thá»ƒ khá»Ÿi táº¡o..."
    
    # Prompt hard-coded
    prompt_hai_chieu = """..."""
    
    messages = [...]
    
    try:
        # Gá»i API - khÃ´ng cÃ³ timeout, retry config
        response = client.chat.completions.create(
            model="gpt-4o",  # Hard-coded, khÃ´ng thá»ƒ Ä‘á»•i
            messages=messages,
            tools=tools_schema,
            tool_choice="auto",
        )
        
        message_phan_hoi = response.choices[0].message
        
        # Xá»­ lÃ½ tool calls phá»©c táº¡p
        if message_phan_hoi.tool_calls:
            messages.append(message_phan_hoi)
            
            for tool_call in message_phan_hoi.tool_calls:
                try:
                    args = json.loads(tool_call.function.arguments)
                    # Gá»i function - khÃ´ng extensible
                    ket_qua = luu_tu_vung(
                        args["tu_moi"], 
                        args["pinyin"], 
                        args["nghia"]
                    )
                    messages.append({...})
                except Exception as e:
                    print(f"Lá»—i tool: {e}")  # Chá»‰ print
            
            # Gá»i AI láº§n 2
            final_response = client.chat.completions.create(
                model="gpt-4o", 
                messages=messages
            )
            return final_response.choices[0].message.content
        
        return message_phan_hoi.content
        
    except Exception as e:
        return f"Lá»—i: {str(e)}"  # KhÃ´ng cÃ³ retry

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CODE Má»šI (SDK - Object-Oriented Programming):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

"""
Docstring module - Giáº£i thÃ­ch má»¥c Ä‘Ã­ch
"""
import logging
from typing import Optional, Dict, Any
from dataclasses import dataclass
from enum import Enum
from openai import OpenAI

# Logging configuration
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)


# 1. ENUM cho model types (Type-safe, khÃ´ng typo)
class ModelType(Enum):
    GPT4O = "gpt-4o"
    GPT4_TURBO = "gpt-4-turbo-preview"
    GPT35_TURBO = "gpt-3.5-turbo"


# 2. DATACLASS cho configuration (RÃµ rÃ ng, cÃ³ default values)
@dataclass
class AIConfig:
    """Cáº¥u hÃ¬nh cho AI Engine"""
    api_key: Optional[str] = None
    model: str = ModelType.GPT4O.value
    temperature: float = 0.3
    max_tokens: int = 1000
    timeout: int = 30
    max_retries: int = 3
    
    def __post_init__(self):
        if not self.api_key:
            self.api_key = os.environ.get("OPENAI_API_KEY")


# 3. DATACLASS cho vocabulary data (Structured data)
@dataclass
class VocabularyEntry:
    """Dá»¯ liá»‡u tá»« vá»±ng"""
    chinese: str
    pinyin: str
    vietnamese: str
    example: Optional[str] = None
    
    def to_dict(self) -> Dict[str, Any]:
        return {
            "chinese": self.chinese,
            "pinyin": self.pinyin,
            "vietnamese": self.vietnamese,
            "example": self.example
        }


# 4. CLASS SDK chÃ­nh (Encapsulation)
class ChineseAIEngine:
    """
    SDK chÃ­nh cho AI Engine há»c tiáº¿ng Trung
    
    Sá»­ dá»¥ng:
        engine = ChineseAIEngine()
        result = engine.translate("ä½ å¥½")
    """
    
    def __init__(self, config: Optional[AIConfig] = None):
        """
        Khá»Ÿi táº¡o AI Engine vá»›i config tÃ¹y chá»‰nh
        
        Args:
            config: Cáº¥u hÃ¬nh tÃ¹y chá»‰nh (optional)
        """
        self.config = config or AIConfig()
        self._client: Optional[OpenAI] = None
        self._vocabulary_file = "tu_vung_trung_viet.txt"
        
        # System prompts - CÃ³ thá»ƒ override
        self.system_prompt = """
        Báº¡n lÃ  Gia sÆ° song ngá»¯ Trung - Viá»‡t chuyÃªn nghiá»‡p.
        1. Náº¿u nháº­p Tiáº¿ng Trung: Hiá»‡n Pinyin -> Dá»‹ch Viá»‡t -> LÆ°u tá»« má»›i.
        2. Náº¿u nháº­p Tiáº¿ng Viá»‡t: Dá»‹ch Trung -> Hiá»‡n Pinyin -> LÆ°u tá»« Trung.
        LuÃ´n Æ°u tiÃªn gá»i hÃ m 'save_vocabulary'.
        """
        
        # Tools schema - Organized
        self.tools_schema = [...]
    
    @property
    def client(self) -> OpenAI:
        """
        Lazy initialization cá»§a OpenAI client
        Chá»‰ khá»Ÿi táº¡o khi cáº§n dÃ¹ng, tiáº¿t kiá»‡m resources
        """
        if self._client is None:
            if not self.config.api_key:
                raise ValueError(
                    "API key khÃ´ng tá»“n táº¡i. Vui lÃ²ng cáº¥u hÃ¬nh..."
                )
            
            try:
                self._client = OpenAI(
                    api_key=self.config.api_key,
                    timeout=self.config.timeout,  # Configurable
                    max_retries=self.config.max_retries  # Auto retry
                )
                logger.info("âœ“ OpenAI client initialized successfully")
            except Exception as e:
                logger.error(f"âœ— Failed to initialize: {e}")
                raise
        
        return self._client
    
    def save_vocabulary(
        self, 
        chinese: str, 
        pinyin: str, 
        vietnamese: str
    ) -> str:
        """
        LÆ°u tá»« vá»±ng vÃ o file
        
        Args:
            chinese: Tá»« tiáº¿ng Trung
            pinyin: PhiÃªn Ã¢m Pinyin
            vietnamese: NghÄ©a tiáº¿ng Viá»‡t
            
        Returns:
            ThÃ´ng bÃ¡o káº¿t quáº£
        """
        try:
            entry = VocabularyEntry(chinese, pinyin, vietnamese)
            content = f"{entry.chinese} ({entry.pinyin}) : {entry.vietnamese}\n"
            
            with open(self._vocabulary_file, "a", encoding="utf-8") as f:
                f.write(content)
            
            logger.info(f"âœ“ Saved vocabulary: {chinese}")
            return f"âœ“ ÄÃ£ lÆ°u: {chinese} ({pinyin})"
            
        except Exception as e:
            logger.error(f"âœ— Failed to save: {e}")
            return f"âœ— Lá»—i: {e}"
    
    def translate(self, text: str) -> str:
        """
        Dá»‹ch vÄƒn báº£n vÃ  lÆ°u tá»« vá»±ng tá»± Ä‘á»™ng
        
        Args:
            text: VÄƒn báº£n cáº§n dá»‹ch (tiáº¿ng Trung hoáº·c tiáº¿ng Viá»‡t)
            
        Returns:
            Káº¿t quáº£ dá»‹ch vÃ  giáº£i thÃ­ch
        """
        try:
            messages = [
                {"role": "system", "content": self.system_prompt},
                {"role": "user", "content": text},
            ]
            
            logger.info(f"â†’ Translating: {text}")
            
            # Gá»i AI vá»›i config
            response = self.client.chat.completions.create(
                model=self.config.model,  # Configurable
                messages=messages,
                tools=self.tools_schema,
                tool_choice="auto",
                temperature=self.config.temperature,  # Configurable
                max_tokens=self.config.max_tokens  # Configurable
            )
            
            message = response.choices[0].message
            
            # Xá»­ lÃ½ tool calls
            if message.tool_calls:
                messages.append(message)
                
                for tool_call in message.tool_calls:
                    try:
                        args = json.loads(tool_call.function.arguments)
                        
                        # Extensible - cÃ³ thá»ƒ thÃªm function khÃ¡c
                        if tool_call.function.name == "save_vocabulary":
                            result = self.save_vocabulary(
                                args["chinese"],
                                args["pinyin"],
                                args["vietnamese"]
                            )
                        else:
                            result = f"Unknown function: {tool_call.function.name}"
                        
                        messages.append({
                            "role": "tool",
                            "tool_call_id": tool_call.id,
                            "content": result,
                        })
                        
                    except Exception as e:
                        logger.error(f"âœ— Tool execution error: {e}")
                        messages.append({
                            "role": "tool",
                            "tool_call_id": tool_call.id,
                            "content": f"Error: {str(e)}",
                        })
                
                # Gá»i AI láº§n 2
                final_response = self.client.chat.completions.create(
                    model=self.config.model,
                    messages=messages,
                    temperature=self.config.temperature
                )
                
                result = final_response.choices[0].message.content
                logger.info(f"âœ“ Translation completed")
                return result
            
            result = message.content or "KhÃ´ng cÃ³ káº¿t quáº£"
            logger.info(f"âœ“ Direct response")
            return result
            
        except Exception as e:
            logger.error(f"âœ— Translation error: {e}")
            return f"âœ— Lá»—i: {str(e)}"


# Backward compatibility - Code cÅ© váº«n cháº¡y Ä‘Æ°á»£c
def chay_gia_su(cau_hoi):
    """[Deprecated] Sá»­ dá»¥ng ChineseAIEngine.translate thay tháº¿"""
    engine = ChineseAIEngine()
    return engine.translate(cau_hoi)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SO SÃNH CÃCH DÃ™NG:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âŒ CODE CÅ¨ - Phá»©c táº¡p:
    
    # Pháº£i tá»± check API key
    api_key = os.environ.get("OPENAI_API_KEY")
    if not api_key:
        print("KhÃ´ng cÃ³ API key!")
        return
    
    # Pháº£i tá»± khá»Ÿi táº¡o
    client = get_openai_client()
    if not client:
        print("Lá»—i khá»Ÿi táº¡o!")
        return
    
    # Gá»i function
    result = chay_gia_su("ä½ å¥½")
    
    # KhÃ´ng thá»ƒ Ä‘á»•i model, temperature dá»… dÃ ng

âœ… CODE Má»šI - ÄÆ¡n giáº£n:

    # CÃ¡ch 1: DÃ¹ng máº·c Ä‘á»‹nh
    engine = ChineseAIEngine()
    result = engine.translate("ä½ å¥½")
    
    # CÃ¡ch 2: TÃ¹y chá»‰nh config
    config = AIConfig(
        model=ModelType.GPT4O.value,
        temperature=0.5,
        max_retries=5
    )
    engine = ChineseAIEngine(config=config)
    result = engine.translate("ä½ å¥½")
    
    # CÃ¡ch 3: Override API key
    config = AIConfig(api_key="sk-your-key")
    engine = ChineseAIEngine(config=config)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ B. HOME/AI_HELPER.PY - Chá»©c nÄƒng Tá»± Ä‘á»™ng Ä‘iá»n tá»« vá»±ng                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CODE CÅ¨ - CÃ¡c váº¥n Ä‘á»:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

def get_ai_vocabulary_info(chinese=None, vietnamese=None):
    """
    KhÃ´ng cÃ³ type hints â†’ KhÃ´ng biáº¿t input/output lÃ  gÃ¬
    KhÃ´ng cÃ³ dataclass â†’ DÃ¹ng dict, dá»… typo
    """
    api_key = os.environ.get("OPENAI_API_KEY")
    
    # KhÃ´ng cÃ³ fallback náº¿u khÃ´ng cÃ³ API key
    if not api_key:
        return use_google_translate_fallback(chinese, vietnamese)
    
    try:
        # Khá»Ÿi táº¡o láº¡i má»—i láº§n (khÃ´ng tá»‘t)
        client = OpenAI(api_key=api_key)
        
        # Prompt ráº¥t dÃ i, hard to maintain
        if chinese:
            prompt = f"""Báº¡n lÃ  trá»£ lÃ½...
            
Tráº£ vá» JSON vá»›i format chÃ­nh xÃ¡c sau:
{{
    "chinese": "ä»",
    "pinyin": "cÃ³ng",
    ...
}}"""
        else:
            prompt = f"""..."""
        
        # Gá»i API - khÃ´ng cÃ³ config
        response = client.chat.completions.create(
            model="gpt-3.5-turbo",  # Hard-coded
            messages=[...],
            temperature=0.3,  # Hard-coded
            max_tokens=500,  # Hard-coded
        )
        
        result_text = response.choices[0].message.content.strip()
        
        # Parse JSON phá»©c táº¡p
        if result_text.startswith("```"):
            result_text = result_text.split("```")[1]
            if result_text.startswith("json"):
                result_text = result_text[4:]
            result_text = result_text.strip()
        
        vocab_info = json.loads(result_text)
        
        # Return dict thuáº§n (khÃ´ng cÃ³ structure)
        return {
            "success": True,
            "method": "AI (OpenAI)",
            "data": {
                "chinese": vocab_info.get("chinese", chinese or ""),
                "pinyin": vocab_info.get("pinyin", ""),
                "vietnamese": vocab_info.get("vietnamese", vietnamese or ""),
                "example_sentence": vocab_info.get("example", ""),
            },
        }
    
    except json.JSONDecodeError as e:
        print(f"JSON error: {e}")  # Chá»‰ print
        return use_google_translate_fallback(chinese, vietnamese)
    
    except Exception as e:
        print(f"Error: {e}")  # Chá»‰ print
        return use_google_translate_fallback(chinese, vietnamese)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CODE Má»šI - Cáº£i thiá»‡n:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# 1. ENUM cho translation method
class TranslationMethod(Enum):
    """PhÆ°Æ¡ng thá»©c dá»‹ch"""
    OPENAI = "AI (OpenAI)"
    GOOGLE = "Google Translate"
    FALLBACK = "Google Translate (Dá»± phÃ²ng)"


# 2. DATACLASS cho vocabulary data
@dataclass
class VocabularyData:
    """Dá»¯ liá»‡u tá»« vá»±ng chuáº©n"""
    chinese: str = ""
    pinyin: str = ""
    vietnamese: str = ""
    example_sentence: str = ""
    
    def to_dict(self) -> Dict[str, str]:
        return asdict(self)


# 3. DATACLASS cho result
@dataclass
class TranslationResult:
    """Káº¿t quáº£ dá»‹ch"""
    success: bool
    method: str
    data: Optional[VocabularyData] = None
    error: Optional[str] = None
    
    def to_dict(self) -> Dict[str, Any]:
        result = {
            "success": self.success,
            "method": self.method
        }
        if self.data:
            result["data"] = self.data.to_dict()
        if self.error:
            result["error"] = self.error
        return result


# 4. CLASS riÃªng cho Google Translator
class GoogleTranslator:
    """Wrapper cho Google Translate"""
    
    @staticmethod
    def translate(
        text: str, 
        source_lang: str = "auto", 
        target_lang: str = "vi"
    ) -> Dict[str, Any]:
        """Dá»‹ch vÄƒn báº£n vá»›i fallback strategy"""
        try:
            from deep_translator import GoogleTranslator as DeepGoogleTranslator
            translator = DeepGoogleTranslator(source=source_lang, target=target_lang)
            result = translator.translate(text)
            logger.info(f"âœ“ Translated: {text[:30]}...")
            return {"success": True, "translated": result}
        except ImportError:
            logger.warning("Trying googletrans...")
        
        try:
            from googletrans import Translator
            translator = Translator()
            result = translator.translate(text, src=source_lang, dest=target_lang)
            return {"success": True, "translated": result.text}
        except Exception as e:
            logger.error(f"âœ— Translation failed: {e}")
            return {"success": False, "error": f"Lá»—i: {str(e)}"}


# 5. SDK CLASS chÃ­nh
class VocabularyAIHelper:
    """
    SDK cho tá»± Ä‘á»™ng Ä‘iá»n thÃ´ng tin tá»« vá»±ng
    
    Sá»­ dá»¥ng:
        helper = VocabularyAIHelper()
        result = helper.get_vocabulary_info(chinese="ä½ å¥½")
    """
    
    def __init__(
        self, 
        api_key: Optional[str] = None, 
        model: str = "gpt-3.5-turbo"
    ):
        """Khá»Ÿi táº¡o vá»›i config"""
        self.api_key = api_key or os.environ.get("OPENAI_API_KEY")
        self.model = model
        self._client: Optional[OpenAI] = None
        self.google_translator = GoogleTranslator()
    
    @property
    def client(self) -> Optional[OpenAI]:
        """Lazy initialization"""
        if self._client is None and self.api_key:
            try:
                self._client = OpenAI(api_key=self.api_key)
                logger.info("âœ“ OpenAI client initialized")
            except Exception as e:
                logger.error(f"âœ— Failed: {e}")
        return self._client
    
    def get_vocabulary_info(
        self, 
        chinese: Optional[str] = None, 
        vietnamese: Optional[str] = None
    ) -> Dict[str, Any]:
        """
        Tá»± Ä‘á»™ng Ä‘iá»n thÃ´ng tin tá»« vá»±ng
        
        Args:
            chinese: Tá»« tiáº¿ng Trung (náº¿u cÃ³)
            vietnamese: NghÄ©a tiáº¿ng Viá»‡t (náº¿u cÃ³)
            
        Returns:
            Dict chá»©a káº¿t quáº£ vá»›i data tá»« vá»±ng
        """
        # Auto fallback náº¿u khÃ´ng cÃ³ client
        if not self.client:
            logger.warning("Using Google Translate")
            return self._use_google_fallback(chinese, vietnamese)
        
        try:
            prompt = self._build_prompt(chinese, vietnamese)
            logger.info(f"â†’ Getting info for: {chinese or vietnamese}")
            
            response = self.client.chat.completions.create(
                model=self.model,
                messages=[
                    {"role": "system", "content": "..."},
                    {"role": "user", "content": prompt}
                ],
                temperature=0.3,
                max_tokens=500
            )
            
            result_text = response.choices[0].message.content.strip()
            vocab_info = self._parse_ai_response(result_text)
            
            # Return structured result
            result = TranslationResult(
                success=True,
                method=TranslationMethod.OPENAI.value,
                data=VocabularyData(
                    chinese=vocab_info.get("chinese", chinese or ""),
                    pinyin=vocab_info.get("pinyin", ""),
                    vietnamese=vocab_info.get("vietnamese", vietnamese or ""),
                    example_sentence=vocab_info.get("example", "")
                )
            )
            
            logger.info(f"âœ“ Info retrieved successfully")
            return result.to_dict()
            
        except json.JSONDecodeError as e:
            logger.error(f"âœ— JSON error, fallback: {e}")
            return self._use_google_fallback(chinese, vietnamese)
        except Exception as e:
            logger.error(f"âœ— Error, fallback: {e}")
            return self._use_google_fallback(chinese, vietnamese)
    
    def _build_prompt(
        self, 
        chinese: Optional[str], 
        vietnamese: Optional[str]
    ) -> str:
        """XÃ¢y dá»±ng prompt cho AI (Private method)"""
        # ... implementation ...
    
    def _parse_ai_response(self, text: str) -> Dict[str, str]:
        """Parse response tá»« AI (Private method)"""
        if text.startswith("```"):
            text = text.split("```")[1]
            if text.startswith("json"):
                text = text[4:]
            text = text.strip()
        return json.loads(text)
    
    def _use_google_fallback(
        self, 
        chinese: Optional[str], 
        vietnamese: Optional[str]
    ) -> Dict[str, Any]:
        """Fallback sá»­ dá»¥ng Google Translate (Private method)"""
        # ... implementation ...


# Backward compatibility
def get_ai_vocabulary_info(chinese=None, vietnamese=None):
    """[Deprecated] DÃ¹ng VocabularyAIHelper thay tháº¿"""
    helper = VocabularyAIHelper()
    return helper.get_vocabulary_info(chinese, vietnamese)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SO SÃNH CÃCH DÃ™NG:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âŒ CODE CÅ¨:
    
    result = get_ai_vocabulary_info(chinese="ä½ å¥½")
    
    # DÃ¹ng dict, dá»… typo
    print(result["data"]["pinyin"])  # CÃ³ thá»ƒ typo thÃ nh "pinin"
    
    # KhÃ´ng biáº¿t structure cá»§a result

âœ… CODE Má»šI:

    helper = VocabularyAIHelper()
    result = helper.get_vocabulary_info(chinese="ä½ å¥½")
    
    # Type-safe, IDE cÃ³ autocomplete
    print(result['data']['pinyin'])
    
    # TÃ¹y chá»‰nh model
    helper = VocabularyAIHelper(model="gpt-4-turbo-preview")
    result = helper.get_vocabulary_info(chinese="å­¦ä¹ ")

================================================================================
4. Cáº¤U TRÃšC SDK TRONG Dá»° ÃN
================================================================================

HocTiengTrungPJ/
â”‚
â”œâ”€â”€ translator/
â”‚   â””â”€â”€ ai_engine.py â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚                      â”‚
â”‚       â”œâ”€â”€ ChineseAIEngine    â”‚ â—„â”€â”€â”€ SDK 1: Dá»‹ch thuáº­t
â”‚       â”œâ”€â”€ AIConfig           â”‚
â”‚       â”œâ”€â”€ VocabularyEntry    â”‚
â”‚       â””â”€â”€ ModelType          â”‚
â”‚                              â”‚
â”œâ”€â”€ home/                      â”‚
â”‚   â””â”€â”€ ai_helper.py â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       â”‚                      â”‚
â”‚       â”œâ”€â”€ VocabularyAIHelper â”‚ â—„â”€â”€â”€ SDK 2: Tá»« vá»±ng
â”‚       â”œâ”€â”€ GoogleTranslator   â”‚
â”‚       â”œâ”€â”€ VocabularyData     â”‚
â”‚       â”œâ”€â”€ TranslationResult  â”‚
â”‚       â””â”€â”€ TranslationMethod  â”‚
â”‚                              â”‚
â””â”€â”€ AI_SDK_README.md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€ Documentation


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SDK 1: ChineseAIEngine (translator/ai_engine.py)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚  ModelType   â”‚ â—„â”€â”€ Enum: GPT4O, GPT4_TURBO, GPT35_TURBO        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚         â–²                                                           â”‚
â”‚         â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚  AIConfig    â”‚ â—„â”€â”€ Dataclass: api_key, model, temperature...   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚         â–²                                                           â”‚
â”‚         â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚  ChineseAIEngine        â”‚ â—„â”€â”€ Main SDK Class                    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                       â”‚
â”‚  â”‚ + __init__(config)      â”‚                                       â”‚
â”‚  â”‚ + translate(text)       â”‚ â—„â”€â”€ Public method                     â”‚
â”‚  â”‚ + save_vocabulary()     â”‚ â—„â”€â”€ Public method                     â”‚
â”‚  â”‚ - client (property)     â”‚ â—„â”€â”€ Lazy initialization               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚         â–²                                                           â”‚
â”‚         â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ VocabularyEntry  â”‚ â—„â”€â”€ Dataclass: chinese, pinyin, vietnamese  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SDK 2: VocabularyAIHelper (home/ai_helper.py)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚  â”‚ TranslationMethod â”‚ â—„â”€â”€ Enum: OPENAI, GOOGLE, FALLBACK         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ VocabularyData   â”‚ â—„â”€â”€ Dataclass: chinese, pinyin...           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚         â–²                                                           â”‚
â”‚         â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ TranslationResult  â”‚ â—„â”€â”€ Dataclass: success, method, data      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚         â–²                                                           â”‚
â”‚         â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ GoogleTranslator       â”‚ â—„â”€â”€ Fallback strategy                  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                        â”‚
â”‚  â”‚ + translate()          â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚         â–²                                                           â”‚
â”‚         â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚ VocabularyAIHelper          â”‚ â—„â”€â”€ Main SDK Class                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                   â”‚
â”‚  â”‚ + __init__(api_key, model)  â”‚                                   â”‚
â”‚  â”‚ + get_vocabulary_info()     â”‚ â—„â”€â”€ Public method                 â”‚
â”‚  â”‚ - client (property)         â”‚ â—„â”€â”€ Lazy initialization           â”‚
â”‚  â”‚ - _build_prompt()           â”‚ â—„â”€â”€ Private method                â”‚
â”‚  â”‚ - _parse_ai_response()      â”‚ â—„â”€â”€ Private method                â”‚
â”‚  â”‚ - _use_google_fallback()    â”‚ â—„â”€â”€ Private method                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
5. CHI TIáº¾T THAY Äá»”I Tá»ªNG FILE
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FILE: translator/ai_engine.py                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â¤ THÃŠM Má»šI:

1. Import statements
   âœ“ logging - Äá»ƒ ghi log thay vÃ¬ print
   âœ“ typing - Type hints (Optional, Dict, Any, List)
   âœ“ dataclasses - Äá»ƒ táº¡o data structures
   âœ“ Enum - Äá»ƒ táº¡o constants type-safe

2. ModelType Enum
   âœ“ GPT4O = "gpt-4o"
   âœ“ GPT4_TURBO = "gpt-4-turbo-preview"
   âœ“ GPT35_TURBO = "gpt-3.5-turbo"
   
   Lá»£i Ã­ch:
   - KhÃ´ng thá»ƒ typo tÃªn model
   - IDE cÃ³ autocomplete
   - Dá»… thÃªm model má»›i

3. AIConfig Dataclass
   âœ“ api_key: Optional[str] = None
   âœ“ model: str = ModelType.GPT4O.value
   âœ“ temperature: float = 0.3
   âœ“ max_tokens: int = 1000
   âœ“ timeout: int = 30
   âœ“ max_retries: int = 3
   
   Lá»£i Ã­ch:
   - Táº¥t cáº£ config á»Ÿ má»™t chá»—
   - CÃ³ default values
   - Dá»… override tá»«ng config
   - Type-safe

4. VocabularyEntry Dataclass
   âœ“ chinese: str
   âœ“ pinyin: str
   âœ“ vietnamese: str
   âœ“ example: Optional[str] = None
   âœ“ to_dict() method
   
   Lá»£i Ã­ch:
   - Structured data thay vÃ¬ dict
   - Type-safe
   - CÃ³ methods tiá»‡n Ã­ch

5. ChineseAIEngine Class
   
   a) __init__(config)
      - Nháº­n config tÃ¹y chá»‰nh hoáº·c dÃ¹ng default
      - Khá»Ÿi táº¡o cÃ¡c attributes
      - Setup system prompt vÃ  tools schema
   
   b) client Property (Lazy initialization)
      - Chá»‰ khá»Ÿi táº¡o OpenAI client khi cáº§n dÃ¹ng
      - Validate API key
      - CÃ³ timeout vÃ  max_retries config
      - Raise error rÃµ rÃ ng náº¿u fail
   
   c) save_vocabulary(chinese, pinyin, vietnamese)
      - LÆ°u tá»« vá»±ng vá»›i structured data
      - Logging káº¿t quáº£
      - Error handling
   
   d) translate(text)
      - Dá»‹ch vÄƒn báº£n thÃ´ng minh
      - Tá»± Ä‘á»™ng gá»i function calling
      - Logging tá»«ng bÆ°á»›c
      - Error handling toÃ n diá»‡n
      - Extensible (dá»… thÃªm function má»›i)

â¤ GIá»® Láº I (Backward Compatibility):

   - client variable (deprecated)
   - get_openai_client() function (deprecated)
   - luu_tu_vung() function (deprecated)
   - chay_gia_su() function (deprecated)
   
   â†’ Code cÅ© váº«n cháº¡y Ä‘Æ°á»£c, nhÆ°ng recommend dÃ¹ng SDK má»›i


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FILE: home/ai_helper.py                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â¤ THÃŠM Má»šI:

1. Import statements
   âœ“ logging
   âœ“ typing (Optional, Dict, Any, Union)
   âœ“ dataclasses (dataclass, asdict)
   âœ“ Enum

2. TranslationMethod Enum
   âœ“ OPENAI = "AI (OpenAI)"
   âœ“ GOOGLE = "Google Translate"
   âœ“ FALLBACK = "Google Translate (Dá»± phÃ²ng)"
   
   Lá»£i Ã­ch: Type-safe constants

3. VocabularyData Dataclass
   âœ“ chinese: str = ""
   âœ“ pinyin: str = ""
   âœ“ vietnamese: str = ""
   âœ“ example_sentence: str = ""
   âœ“ to_dict() method

4. TranslationResult Dataclass
   âœ“ success: bool
   âœ“ method: str
   âœ“ data: Optional[VocabularyData] = None
   âœ“ error: Optional[str] = None
   âœ“ to_dict() method
   
   Lá»£i Ã­ch: Structured return value

5. GoogleTranslator Class
   
   a) translate(text, source_lang, target_lang)
      - Static method
      - Fallback strategy: deep-translator â†’ googletrans
      - Logging
      - Error handling

6. VocabularyAIHelper Class
   
   a) __init__(api_key, model)
      - TÃ¹y chá»‰nh API key vÃ  model
      - Lazy initialization
      - TÃ­ch há»£p GoogleTranslator
   
   b) client Property
      - Lazy initialization
      - Logging
   
   c) get_vocabulary_info(chinese, vietnamese)
      - Main public method
      - Auto fallback náº¿u khÃ´ng cÃ³ OpenAI
      - Structured return
      - Logging chi tiáº¿t
   
   d) _build_prompt(chinese, vietnamese)
      - Private method
      - XÃ¢y dá»±ng prompt dá»±a trÃªn input
   
   e) _parse_ai_response(text)
      - Private method
      - Parse JSON tá»« AI response
      - Xá»­ lÃ½ markdown code blocks
   
   f) _use_google_fallback(chinese, vietnamese)
      - Private method
      - Fallback strategy
      - Return structured result

â¤ REFACTOR:

   - translate_with_google() â†’ DÃ¹ng GoogleTranslator.translate()
   - get_ai_vocabulary_info() â†’ DÃ¹ng VocabularyAIHelper.get_vocabulary_info()
   - use_google_translate_fallback() â†’ DÃ¹ng _use_google_fallback()

â¤ GIá»® Láº I (Backward Compatibility):

   - translate_with_google() function (deprecated)
   - get_ai_vocabulary_info() function (deprecated)
   - use_google_translate_fallback() function (deprecated)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FILE Má»šI: AI_SDK_README.md                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â¤ Ná»˜I DUNG:

1. Tá»•ng quan vá» 2 SDK
2. HÆ°á»›ng dáº«n cÃ i Ä‘áº·t vÃ  cáº¥u hÃ¬nh
3. VÃ­ dá»¥ sá»­ dá»¥ng chi tiáº¿t
4. API Reference
5. TÃ­nh nÄƒng ná»•i báº­t
6. Kiáº¿n trÃºc SDK
7. TÃ­ch há»£p vá»›i Django
8. Error handling
9. Logging
10. Backward compatibility
11. Best practices
12. Troubleshooting
13. Performance tips

================================================================================
6. HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG SDK Má»šI
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A. Sá»¬ Dá»¤NG ChineseAIEngine                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. CÃCH CÆ  Báº¢N NHáº¤T:
   
   from translator.ai_engine import ChineseAIEngine
   
   engine = ChineseAIEngine()
   result = engine.translate("ä½ å¥½")
   print(result)

2. TÃ™Y CHá»ˆNH CONFIG:
   
   from translator.ai_engine import ChineseAIEngine, AIConfig, ModelType
   
   config = AIConfig(
       api_key="sk-your-key",
       model=ModelType.GPT4O.value,
       temperature=0.5,
       max_tokens=1500,
       timeout=60,
       max_retries=5
   )
   
   engine = ChineseAIEngine(config=config)
   result = engine.translate("æˆ‘å–œæ¬¢å­¦ä¹ ä¸­æ–‡")

3. LÆ¯U Tá»ª Vá»°NG THá»¦ CÃ”NG:
   
   engine = ChineseAIEngine()
   result = engine.save_vocabulary(
       chinese="å­¦ä¹ ",
       pinyin="xuÃ©xÃ­",
       vietnamese="há»c táº­p"
   )
   print(result)  # âœ“ ÄÃ£ lÆ°u: å­¦ä¹  (xuÃ©xÃ­)

4. TRONG DJANGO VIEWS:
   
   from django.http import JsonResponse
   from translator.ai_engine import ChineseAIEngine
   
   def translate_view(request):
       text = request.POST.get('text', '')
       
       engine = ChineseAIEngine()
       result = engine.translate(text)
       
       return JsonResponse({
           'success': True,
           'result': result
       })

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ B. Sá»¬ Dá»¤NG VocabularyAIHelper                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Tá»ª TIáº¾NG TRUNG â†’ THÃ”NG TIN Äáº¦Y Äá»¦:
   
   from home.ai_helper import VocabularyAIHelper
   
   helper = VocabularyAIHelper()
   result = helper.get_vocabulary_info(chinese="å­¦ä¹ ")
   
   print(result)
   # {
   #     "success": True,
   #     "method": "AI (OpenAI)",
   #     "data": {
   #         "chinese": "å­¦ä¹ ",
   #         "pinyin": "xuÃ©xÃ­",
   #         "vietnamese": "há»c táº­p",
   #         "example_sentence": "æˆ‘å–œæ¬¢å­¦ä¹ ä¸­æ–‡..."
   #     }
   # }

2. Tá»ª TIáº¾NG VIá»†T â†’ TÃŒM CHá»® TRUNG:
   
   helper = VocabularyAIHelper()
   result = helper.get_vocabulary_info(vietnamese="báº¡n bÃ¨")
   
   print(result['data']['chinese'])   # æœ‹å‹
   print(result['data']['pinyin'])    # pÃ©ngyÇ’u

3. Sá»¬ Dá»¤NG GPT-4:
   
   helper = VocabularyAIHelper(model="gpt-4-turbo-preview")
   result = helper.get_vocabulary_info(chinese="å›°éš¾")

4. TRONG DJANGO VIEWS:
   
   from django.http import JsonResponse
   from home.ai_helper import VocabularyAIHelper
   
   def auto_fill_vocabulary(request):
       chinese = request.POST.get('chinese', '')
       
       helper = VocabularyAIHelper()
       result = helper.get_vocabulary_info(chinese=chinese)
       
       if result['success']:
           return JsonResponse({
               'success': True,
               'data': result['data']
           })
       else:
           return JsonResponse({
               'success': False,
               'error': result.get('error', 'Unknown error')
           })

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ C. Sá»¬ Dá»¤NG GoogleTranslator (Fallback)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

from home.ai_helper import GoogleTranslator

translator = GoogleTranslator()

# Dá»‹ch Trung â†’ Viá»‡t
result = translator.translate("ä½ å¥½", source_lang="zh-CN", target_lang="vi")
print(result["translated"])  # xin chÃ o

# Dá»‹ch Viá»‡t â†’ Trung
result = translator.translate("xin chÃ o", source_lang="vi", target_lang="zh-CN")
print(result["translated"])  # ä½ å¥½

================================================================================
7. Lá»¢I ÃCH Cá»¦A SDK
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. CODE Sáº CH, Dá»„ Äá»ŒC                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ CODE CÅ¨ (50+ dÃ²ng):
    
    client = get_openai_client()
    if not client:
        return "Lá»—i..."
    
    prompt = """..."""
    messages = [...]
    
    try:
        response = client.chat.completions.create(...)
        message = response.choices[0].message
        
        if message.tool_calls:
            messages.append(message)
            for tool_call in message.tool_calls:
                args = json.loads(...)
                result = luu_tu_vung(...)
                messages.append(...)
            
            final_response = client.chat.completions.create(...)
            return final_response.choices[0].message.content
        
        return message.content
    except Exception as e:
        return f"Lá»—i: {e}"

âœ… CODE Má»šI (2 dÃ²ng):

    engine = ChineseAIEngine()
    result = engine.translate("ä½ å¥½")

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Xá»¬ LÃ Lá»–I TOÃ€N DIá»†N                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ“ Validate API key ngay khi khá»Ÿi táº¡o
âœ“ Auto retry khi network lá»—i (configurable max_retries)
âœ“ Timeout Ä‘á»ƒ trÃ¡nh treo (configurable timeout)
âœ“ Fallback sang Google Translate náº¿u OpenAI lá»—i
âœ“ Logging chi tiáº¿t Ä‘á»ƒ debug
âœ“ Error messages rÃµ rÃ ng

VÃ­ dá»¥:

    # Náº¿u khÃ´ng cÃ³ API key
    â†’ ValueError: "API key khÃ´ng tá»“n táº¡i. Vui lÃ²ng cáº¥u hÃ¬nh..."
    
    # Náº¿u network lá»—i
    â†’ Tá»± Ä‘á»™ng retry 3 láº§n (máº·c Ä‘á»‹nh)
    â†’ Náº¿u váº«n lá»—i: "âœ— Lá»—i káº¿t ná»‘i OpenAI: ..."
    
    # Náº¿u OpenAI háº¿t quota
    â†’ VocabularyAIHelper tá»± Ä‘á»™ng fallback sang Google Translate
    â†’ Log: "WARNING: OpenAI not available, using Google Translate"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Dá»„ TÃ™Y CHá»ˆNH                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ“ Äá»•i model dá»… dÃ ng:
    
    config = AIConfig(model=ModelType.GPT35_TURBO.value)
    engine = ChineseAIEngine(config=config)

âœ“ Äiá»u chá»‰nh temperature:
    
    config = AIConfig(temperature=0.7)  # SÃ¡ng táº¡o hÆ¡n
    engine = ChineseAIEngine(config=config)

âœ“ TÄƒng timeout cho network cháº­m:
    
    config = AIConfig(timeout=120)
    engine = ChineseAIEngine(config=config)

âœ“ TÄƒng sá»‘ láº§n retry:
    
    config = AIConfig(max_retries=10)
    engine = ChineseAIEngine(config=config)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. LOGGING CHI TIáº¾T                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SDK tá»± Ä‘á»™ng log cÃ¡c hoáº¡t Ä‘á»™ng:

INFO:translator.ai_engine:âœ“ OpenAI client initialized successfully
INFO:translator.ai_engine:â†’ Translating: ä½ å¥½
INFO:translator.ai_engine:âœ“ Saved vocabulary: ä½ å¥½
INFO:translator.ai_engine:âœ“ Translation completed

ERROR:translator.ai_engine:âœ— Failed to initialize OpenAI client: Invalid API key
ERROR:translator.ai_engine:âœ— Translation error: Connection timeout

WARNING:home.ai_helper:OpenAI not available, using Google Translate
INFO:home.ai_helper:âœ“ Translated with deep-translator: ä½ å¥½...

CÃ³ thá»ƒ tÃ¹y chá»‰nh logging level:

    import logging
    logging.basicConfig(level=logging.DEBUG)  # Chi tiáº¿t hÆ¡n
    logging.basicConfig(level=logging.WARNING)  # Chá»‰ warnings vÃ  errors

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. TYPE-SAFE Vá»šI DATACLASSES                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ CODE CÅ¨ (Dict - dá»… lá»—i):

    result = get_ai_vocabulary_info(chinese="ä½ å¥½")
    print(result["data"]["pinin"])  # TYPO! Sáº½ lá»—i KeyError

âœ… CODE Má»šI (Dataclass - cÃ³ structure):

    helper = VocabularyAIHelper()
    result = helper.get_vocabulary_info(chinese="ä½ å¥½")
    
    # IDE sáº½ autocomplete
    print(result['data']['pinyin'])  # ÄÃºng!
    
    # CÃ³ thá»ƒ validate type
    data = VocabularyData(**result['data'])
    print(data.pinyin)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Dá»„ TEST                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ“ CÃ³ thá»ƒ mock OpenAI client dá»… dÃ ng
âœ“ CÃ³ thá»ƒ test tá»«ng method riÃªng
âœ“ CÃ³ thá»ƒ test vá»›i config khÃ¡c nhau

VÃ­ dá»¥ test:

    import unittest
    from unittest.mock import Mock, patch
    from translator.ai_engine import ChineseAIEngine, AIConfig
    
    class TestChineseAIEngine(unittest.TestCase):
        
        def test_save_vocabulary(self):
            engine = ChineseAIEngine()
            result = engine.save_vocabulary("ä½ å¥½", "nÇhÇo", "xin chÃ o")
            self.assertIn("âœ“ ÄÃ£ lÆ°u", result)
        
        @patch('translator.ai_engine.OpenAI')
        def test_translate_with_mock(self, mock_openai):
            # Mock OpenAI response
            mock_client = Mock()
            mock_openai.return_value = mock_client
            
            engine = ChineseAIEngine()
            result = engine.translate("ä½ å¥½")
            
            # Assert
            mock_client.chat.completions.create.assert_called_once()

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. Dá»„ Má» Rá»˜NG                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ“ Dá»… thÃªm method má»›i
âœ“ Dá»… thÃªm tool/function má»›i
âœ“ Dá»… thÃªm model má»›i

VÃ­ dá»¥ thÃªm method má»›i:

    class ChineseAIEngine:
        
        # Method cÃ³ sáºµn
        def translate(self, text: str) -> str:
            ...
        
        # ThÃªm method má»›i
        def batch_translate(self, texts: List[str]) -> List[str]:
            """Dá»‹ch nhiá»u vÄƒn báº£n cÃ¹ng lÃºc"""
            results = []
            for text in texts:
                result = self.translate(text)
                results.append(result)
            return results
        
        # ThÃªm method má»›i
        def translate_with_context(self, text: str, context: str) -> str:
            """Dá»‹ch vá»›i ngá»¯ cáº£nh"""
            prompt = f"Ngá»¯ cáº£nh: {context}\n\nDá»‹ch: {text}"
            return self.translate(prompt)

================================================================================
8. VÃ Dá»¤ THá»°C Táº¾ TRONG DJANGO
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A. VIEWS.PY - Sá»­ dá»¥ng trong Django views                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

from django.shortcuts import render
from django.http import JsonResponse
from translator.ai_engine import ChineseAIEngine
from home.ai_helper import VocabularyAIHelper


def translate_view(request):
    """View Ä‘á»ƒ dá»‹ch vÄƒn báº£n Trung-Viá»‡t hoáº·c Viá»‡t-Trung"""
    
    if request.method == 'POST':
        text = request.POST.get('text', '')
        
        if not text:
            return JsonResponse({
                'success': False,
                'error': 'Vui lÃ²ng nháº­p vÄƒn báº£n'
            })
        
        try:
            # Sá»­ dá»¥ng SDK
            engine = ChineseAIEngine()
            result = engine.translate(text)
            
            return JsonResponse({
                'success': True,
                'result': result
            })
            
        except Exception as e:
            return JsonResponse({
                'success': False,
                'error': str(e)
            })
    
    return render(request, 'translate.html')


def auto_fill_vocabulary_view(request):
    """View tá»± Ä‘á»™ng Ä‘iá»n thÃ´ng tin tá»« vá»±ng"""
    
    if request.method == 'POST':
        chinese = request.POST.get('chinese', '')
        vietnamese = request.POST.get('vietnamese', '')
        
        if not chinese and not vietnamese:
            return JsonResponse({
                'success': False,
                'error': 'Vui lÃ²ng nháº­p tiáº¿ng Trung hoáº·c tiáº¿ng Viá»‡t'
            })
        
        try:
            # Sá»­ dá»¥ng SDK
            helper = VocabularyAIHelper()
            result = helper.get_vocabulary_info(
                chinese=chinese or None,
                vietnamese=vietnamese or None
            )
            
            return JsonResponse(result)
            
        except Exception as e:
            return JsonResponse({
                'success': False,
                'error': str(e)
            })
    
    return render(request, 'add_vocabulary.html')


def batch_translate_view(request):
    """View dá»‹ch nhiá»u tá»« cÃ¹ng lÃºc"""
    
    if request.method == 'POST':
        texts = request.POST.getlist('texts[]')  # Nháº­n array
        
        if not texts:
            return JsonResponse({
                'success': False,
                'error': 'KhÃ´ng cÃ³ vÄƒn báº£n nÃ o'
            })
        
        try:
            engine = ChineseAIEngine()
            results = []
            
            for text in texts:
                result = engine.translate(text)
                results.append({
                    'input': text,
                    'output': result
                })
            
            return JsonResponse({
                'success': True,
                'results': results
            })
            
        except Exception as e:
            return JsonResponse({
                'success': False,
                'error': str(e)
            })
    
    return render(request, 'batch_translate.html')

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ B. FORMS.PY - TÃ­ch há»£p vá»›i Django forms                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

from django import forms
from home.ai_helper import VocabularyAIHelper


class VocabularyForm(forms.Form):
    chinese = forms.CharField(
        max_length=100, 
        required=False,
        label="Tá»« tiáº¿ng Trung"
    )
    vietnamese = forms.CharField(
        max_length=200, 
        required=False,
        label="NghÄ©a tiáº¿ng Viá»‡t"
    )
    pinyin = forms.CharField(
        max_length=100, 
        required=False,
        label="PhiÃªn Ã¢m Pinyin"
    )
    example_sentence = forms.CharField(
        widget=forms.Textarea,
        required=False,
        label="CÃ¢u vÃ­ dá»¥"
    )
    
    def clean(self):
        cleaned_data = super().clean()
        chinese = cleaned_data.get('chinese')
        vietnamese = cleaned_data.get('vietnamese')
        
        if not chinese and not vietnamese:
            raise forms.ValidationError(
                "Vui lÃ²ng nháº­p Ã­t nháº¥t tiáº¿ng Trung hoáº·c tiáº¿ng Viá»‡t"
            )
        
        return cleaned_data
    
    def auto_fill(self):
        """Tá»± Ä‘á»™ng Ä‘iá»n thÃ´ng tin báº±ng AI"""
        chinese = self.cleaned_data.get('chinese')
        vietnamese = self.cleaned_data.get('vietnamese')
        
        helper = VocabularyAIHelper()
        result = helper.get_vocabulary_info(
            chinese=chinese or None,
            vietnamese=vietnamese or None
        )
        
        if result['success']:
            data = result['data']
            self.fields['chinese'].initial = data['chinese']
            self.fields['vietnamese'].initial = data['vietnamese']
            self.fields['pinyin'].initial = data['pinyin']
            self.fields['example_sentence'].initial = data['example_sentence']
        
        return result

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ C. MANAGEMENT COMMAND - Táº¡o command Ä‘á»ƒ test SDK                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# home/management/commands/test_sdk.py

from django.core.management.base import BaseCommand
from translator.ai_engine import ChineseAIEngine
from home.ai_helper import VocabularyAIHelper


class Command(BaseCommand):
    help = 'Test AI SDK'
    
    def add_arguments(self, parser):
        parser.add_argument(
            '--translate',
            type=str,
            help='Dá»‹ch vÄƒn báº£n'
        )
        parser.add_argument(
            '--vocab',
            type=str,
            help='Láº¥y thÃ´ng tin tá»« vá»±ng'
        )
    
    def handle(self, *args, **options):
        
        if options['translate']:
            self.stdout.write("Testing ChineseAIEngine...")
            engine = ChineseAIEngine()
            result = engine.translate(options['translate'])
            self.stdout.write(self.style.SUCCESS(result))
        
        if options['vocab']:
            self.stdout.write("Testing VocabularyAIHelper...")
            helper = VocabularyAIHelper()
            result = helper.get_vocabulary_info(chinese=options['vocab'])
            
            if result['success']:
                data = result['data']
                self.stdout.write(self.style.SUCCESS(
                    f"Chinese: {data['chinese']}\n"
                    f"Pinyin: {data['pinyin']}\n"
                    f"Vietnamese: {data['vietnamese']}\n"
                    f"Example: {data['example_sentence']}"
                ))
            else:
                self.stdout.write(self.style.ERROR(result.get('error')))

# CÃ¡ch sá»­ dá»¥ng:
# python manage.py test_sdk --translate "ä½ å¥½"
# python manage.py test_sdk --vocab "å­¦ä¹ "

================================================================================
9. Káº¾T LUáº¬N
================================================================================

â¤ ÄÃƒ THAY Äá»”I GÃŒ?

   âœ“ Code tá»« Functional Programming â†’ Object-Oriented Programming
   âœ“ Code tá»« ráº£i rÃ¡c â†’ Structured SDK
   âœ“ Tá»« khÃ´ng cÃ³ error handling â†’ Error handling toÃ n diá»‡n
   âœ“ Tá»« hard-coded values â†’ Configurable
   âœ“ Tá»« print() â†’ Logging system
   âœ“ Tá»« dict thuáº§n â†’ Dataclasses
   âœ“ Tá»« khÃ´ng cÃ³ docs â†’ Full documentation

â¤ Lá»¢I ÃCH?

   âœ“ Code sáº¡ch hÆ¡n (2 dÃ²ng thay vÃ¬ 50 dÃ²ng)
   âœ“ Dá»… sá»­ dá»¥ng hÆ¡n (chá»‰ cáº§n khá»Ÿi táº¡o vÃ  gá»i method)
   âœ“ Dá»… maintain hÆ¡n (thay Ä‘á»•i 1 chá»— Ã¡p dá»¥ng toÃ n bá»™)
   âœ“ Ãt bug hÆ¡n (type-safe, error handling)
   âœ“ Dá»… má»Ÿ rá»™ng hÆ¡n (thÃªm method/function má»›i dá»… dÃ ng)
   âœ“ Dá»… test hÆ¡n (cÃ³ thá»ƒ mock vÃ  unit test)
   âœ“ Professional hÆ¡n (theo chuáº©n SDK)

â¤ CODE CÅ¨ VáºªN CHáº Y ÄÆ¯á»¢C?

   âœ“ CÃ“! Táº¥t cáº£ function cÅ© Ä‘á»u Ä‘Æ°á»£c giá»¯ láº¡i
   âœ“ Backward compatible 100%
   âœ“ CÃ³ thá»ƒ migrate dáº§n dáº§n sang SDK má»›i

â¤ KHUYáº¾N NGHá»Š?

   âœ“ DÃ¹ng SDK má»›i cho code má»›i
   âœ“ Migrate code cÅ© dáº§n dáº§n
   âœ“ Äá»c AI_SDK_README.md Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n
   âœ“ Test ká»¹ trÆ°á»›c khi deploy production

================================================================================
                            Háº¾T TÃ€I LIá»†U
================================================================================

TÃ i liá»‡u nÃ y giáº£i thÃ­ch chi tiáº¿t vá»:
- SDK lÃ  gÃ¬ vÃ  táº¡i sao cáº§n nÃ³
- Nhá»¯ng thay Ä‘á»•i trong dá»± Ã¡n
- So sÃ¡nh code cÅ© vs code má»›i
- CÃ¡ch sá»­ dá»¥ng SDK má»›i
- Lá»£i Ã­ch cá»§a SDK
- VÃ­ dá»¥ thá»±c táº¿

Náº¿u cÃ³ tháº¯c máº¯c, tham kháº£o:
- AI_SDK_README.md (documentation chi tiáº¿t)
- Code trong translator/ai_engine.py (cÃ³ docstring)
- Code trong home/ai_helper.py (cÃ³ docstring)

Version: 1.0
Last Updated: February 8, 2026
